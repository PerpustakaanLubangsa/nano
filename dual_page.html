<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dual Page - Perpustakaan Lubangsa</title>
<link rel="icon" type="image/png" href="image/logo/logo.png">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
--bg-sidebar: #131314;
--bg-main: #ffffff;
--bg-modal: #ffffff;
--text-main: #1f1f1f;
--text-muted: #8e918f;
--border-color: #444746;
--sidebar-width: 400px;
--collapsed-width: 68px;
--google-blue: #1a73e8;
--google-red: #d93025;
--overlay-bg: rgba(0, 0, 0, 0.4);
}
@media (prefers-color-scheme: dark) {
:root {
--bg-sidebar: #000000;
--bg-main: #000000;
--bg-modal: #1e1f20;
--text-main: #e3e3e3;
--text-muted: #9aa0a6;
--border-color: #333333;
--overlay-bg: rgba(0, 0, 0, 0.7);
}
}
* { margin: 0; padding: 0; box-sizing: border-box; border: none !important; -webkit-tap-highlight-color: transparent; }
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #444746; border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: #5f6368; }
body, html {
height: 100%;
width: 100%;
overflow: hidden;
font-family: 'Plus Jakarta Sans', sans-serif;
background-color: var(--bg-sidebar);
color: var(--text-main);
}
.container {
display: flex;
width: 100%;
height: 100vh;
position: relative;
}
.sidebar {
width: var(--sidebar-width);
height: 100%;
background-color: var(--bg-sidebar);
position: relative;
transition: width 0.25s ease-out;
display: flex;
flex-direction: column;
z-index: 100;
border-right: 1px solid var(--border-color) !important;
}
.sidebar.closed {
width: var(--collapsed-width);
}
.iframe-container {
flex: 1;
width: 100%;
height: 100%;
background: #ffffff;
}
.sidebar.closed .iframe-container {
display: none;
}
.main-content {
flex: 1;
background-color: var(--bg-main);
position: relative;
height: 100%;
}
iframe {
width: 100%;
height: 100%;
border: none;
display: block;
}
.toggle-trigger {
position: absolute;
right: -12px;
top: 50%;
transform: translateY(-50%);
width: 24px;
height: 48px;
background: var(--bg-sidebar);
color: #ffffff;
border-radius: 6px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
z-index: 1001;
box-shadow: 2px 0 5px rgba(0,0,0,0.2);
border: 1px solid var(--border-color) !important;
}
.profile-anchor {
position: absolute;
top: 16px;
right: 24px;
width: 40px;
height: 40px;
border-radius: 50%;
cursor: pointer;
z-index: 1002;
overflow: hidden;
background: #e3e3e3;
display: flex;
align-items: center;
justify-content: center;
}
.profile-anchor img {
width: 100%;
height: 100%;
object-fit: cover;
}
.profile-anchor i {
color: #5f6368;
font-size: 20px;
}
.modal-overlay {
position: fixed;
inset: 0;
background: var(--overlay-bg);
display: flex;
align-items: center;
justify-content: center;
z-index: 2000;
opacity: 0;
visibility: hidden;
transition: opacity 0.15s linear;
}
.modal-overlay.active {
opacity: 1;
visibility: visible;
}
.modal-content {
background: var(--bg-modal);
width: 280px;
padding: 20px;
border-radius: 16px;
text-align: left;
box-shadow: 0 4px 20px rgba(0,0,0,0.4);
color: var(--text-main);
}
.modal-content h2 {
font-size: 18px;
font-weight: 600;
margin-bottom: 8px;
}
.modal-content p {
font-size: 13px;
color: var(--text-muted);
margin-bottom: 20px;
line-height: 1.4;
}
.modal-actions {
display: flex;
justify-content: flex-end;
gap: 4px;
}
.modal-btn {
padding: 8px 16px;
border-radius: 8px;
font-size: 13px;
font-weight: 600;
cursor: pointer;
background: transparent;
}
.modal-btn.cancel {
color: var(--google-blue);
}
.modal-btn.logout {
background: var(--google-red);
color: white;
}
@media (max-width: 768px) {
.sidebar { position: absolute; left: 0; top: 0; }
.sidebar.closed { width: 0; }
.sidebar.closed .toggle-trigger { right: -24px; border-radius: 0 6px 6px 0; }
}
</style>
</head>
<body>
<div class="container">
<div class="sidebar" id="sidebar">
<div class="iframe-container">
<iframe src="form.html"></iframe>
</div>
<div class="toggle-trigger" id="toggleTrigger">
<i class="fa-solid fa-chevron-left" id="toggleIcon"></i>
</div>
</div>
<div class="main-content">
<div class="profile-anchor" id="profileBtn">
<i class="fa-solid fa-user" id="defaultAvatar"></i>
<img src="" id="userAvatar" style="display: none;">
</div>
<iframe src="opac.html"></iframe>
</div>
</div>
<div class="modal-overlay" id="logoutModal">
<div class="modal-content">
<h2>Keluar?</h2>
<p>Sesi admin akan segera diakhiri.</p>
<div class="modal-actions">
<button class="modal-btn cancel" id="cancelBtn">Batal</button>
<button class="modal-btn logout" id="confirmLogoutBtn">Keluar</button>
</div>
</div>
</div>
<script type="module">
import { supabase } from './supa/supa.js';
const sidebar = document.getElementById('sidebar');
const toggleTrigger = document.getElementById('toggleTrigger');
const icon = document.getElementById('toggleIcon');
const profileBtn = document.getElementById('profileBtn');
const userAvatar = document.getElementById('userAvatar');
const defaultAvatar = document.getElementById('defaultAvatar');
const logoutModal = document.getElementById('logoutModal');
const cancelBtn = document.getElementById('cancelBtn');
const confirmLogoutBtn = document.getElementById('confirmLogoutBtn');
toggleTrigger.onclick = () => {
sidebar.classList.toggle('closed');
icon.className = sidebar.classList.contains('closed') ? 'fa-solid fa-chevron-right' : 'fa-solid fa-chevron-left';
};
async function loadUserData() {
const { data: { session } } = await supabase.auth.getSession();
if (session && session.user.user_metadata.avatar_url) {
userAvatar.src = session.user.user_metadata.avatar_url;
userAvatar.style.display = 'block';
defaultAvatar.style.display = 'none';
}
}
profileBtn.onclick = () => logoutModal.classList.add('active');
cancelBtn.onclick = () => logoutModal.classList.remove('active');
logoutModal.onclick = (e) => { if (e.target === logoutModal) logoutModal.classList.remove('active'); };
confirmLogoutBtn.onclick = async () => {
await supabase.auth.signOut();
window.location.replace('index.html');
};
loadUserData();
</script>
</body>
</html>